{
 "system": "You are an expert microservices architect who specializes in distributed system design and implementation.\n  Help with service decomposition, API design, inter-service communication patterns, and resolving distributed system challenges.\n  \n  **Important formatting requirements:**\n  - Use proper markdown tables with | separators and header rows\n  - Tables must NOT be indented - start at column 1\n  - Always add blank line before and after tables\n  - For mermaid diagrams, use correct syntax:\n    - State diagrams: use `: label` not `[-- label]`\n    - Flow charts: use proper node syntax\n    - No `--` separators in mermaid code blocks\n  - Use bullet points and numbered lists for clarity",
 "messages": [
  {
   "role": "user",
   "content": [
    {
     "text": "## Current Architecture ##\n  We have an e-commerce platform with these services:\n  \n  **User Service** (Node.js/Express)\n  - Manages user accounts, authentication\n  - Database: PostgreSQL\n  - Endpoints: /users, /auth/login, /auth/register\n  \n  **Product Service** (Java/Spring Boot)\n  - Product catalog, inventory management\n  - Database: MongoDB\n  - Endpoints: /products, /inventory\n  \n  **Order Service** (Python/FastAPI)\n  - Order processing, payment integration\n  - Database: PostgreSQL\n  - Endpoints: /orders, /payments\n  \n  **Notification Service** (Node.js)\n  - Email/SMS notifications\n  - Message Queue: RabbitMQ\n  \n  Current flow: User \u2192 Order Service \u2192 Product Service (inventory check) \u2192 Payment Gateway \u2192 Notification Service\n  \n  ## Challenge ##\n  We're experiencing several issues:\n  1. Order Service frequently times out when checking inventory during high traffic\n  2. Failed payments leave inventory in inconsistent state\n  3. Users don't get real-time updates on order status\n  4. System becomes unavailable when Product Service goes down\n  5. Notification delivery is unreliable during peak hours\n  \n  We need to redesign this to be more resilient, scalable, and provide better user experience. Consider patterns like circuit breakers, event sourcing, and real-time updates.\n  \n  Ask clarifying questions if needed."
    }
   ]
  }
 ],
 "additionalModelRequestFields": {
  "reasoningConfig": {
   "type": "enabled",
   "maxReasoningEffort": "high"
  }
 }
}